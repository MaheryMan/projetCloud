System.register(["./index-legacy-CuS9xjLg.js","./_plugin-vue_export-helper-legacy-B5Dy_ev0.js"],function(e,a){"use strict";var t,o,n,r,l,i,s,d,c,f,u,b,g,p,x,v,m,h,y,w,k,z,_,E,C,Y,j,G,V,A,I,U,S,D,O,B,M,T,W,$;return{setters:[e=>{t=e.d,o=e.r,n=e.c,r=e.a,l=e.u,i=e.s,s=e.w,d=e.o,c=e.b,f=e.e,u=e.f,b=e.g,g=e.I,p=e.h,x=e.i,v=e.l,m=e.j,h=e.k,y=e.m,w=e.n,k=e.p,z=e.q,_=e.t,E=e.v,C=e.x,Y=e.y,j=e.z,G=e.A,V=e.B,A=e.C,I=e.D,U=e.E,S=e.F},e=>{D=e.o,O=e.h,B=e.l,M=e.a,T=e.b,W=e.u,$=e._}],execute:function(){var a=document.createElement("style");a.textContent='.login-content[data-v-f283ebf8]{--background: linear-gradient(135deg, #0a1929 0%, #1a2332 50%, #0f2847 100%)}.login-container[data-v-f283ebf8]{display:flex;flex-direction:column;justify-content:center;min-height:100%;padding:20px}.brand-section[data-v-f283ebf8]{text-align:center;margin-bottom:40px;animation:fadeInDown-f283ebf8 .6s ease-out}.logo-circle[data-v-f283ebf8]{width:80px;height:80px;margin:0 auto 20px;background:linear-gradient(135deg,#1e3a8a,#3b82f6);border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 24px rgba(59,130,246,.3)}.logo-icon[data-v-f283ebf8]{font-size:40px;color:#fff}.brand-title[data-v-f283ebf8]{font-size:32px;font-weight:700;color:#fff;margin:0 0 8px}.brand-subtitle[data-v-f283ebf8]{font-size:16px;color:rgba(255,255,255,.7);margin:0}.form-section[data-v-f283ebf8]{animation:fadeInUp-f283ebf8 .6s ease-out}.login-card[data-v-f283ebf8]{background:rgba(255,255,255,.95);backdrop-filter:blur(10px);border-radius:20px;box-shadow:0 8px 32px rgba(0,0,0,.3);margin:0}.input-item[data-v-f283ebf8]{--background: #f8fafc;--border-radius: 12px;margin-bottom:16px;border-radius:12px;border:2px solid transparent;transition:all .3s ease}.input-item[data-v-f283ebf8]:focus-within{--background: white;border-color:#3b82f6;box-shadow:0 0 0 4px rgba(59,130,246,.1)}.input-icon[data-v-f283ebf8]{color:#64748b;font-size:20px;margin-right:12px}.password-toggle[data-v-f283ebf8]{--color: #64748b;margin:0}.error-text[data-v-f283ebf8]{display:flex;align-items:center;gap:8px;font-size:14px;margin:12px 0;padding:12px;background:#fee2e2;border-radius:8px;border-left:4px solid #ef4444}.error-text ion-icon[data-v-f283ebf8]{font-size:20px}.login-button[data-v-f283ebf8]{--background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);--border-radius: 12px;--box-shadow: 0 4px 16px rgba(59, 130, 246, .4);margin-top:24px;height:50px;font-weight:600;text-transform:none;font-size:16px;transition:all .3s ease}.login-button[data-v-f283ebf8]:hover{--box-shadow: 0 6px 20px rgba(59, 130, 246, .5);transform:translateY(-2px)}.login-button[data-v-f283ebf8]:active{transform:translateY(0)}.forgot-password[data-v-f283ebf8]{text-align:center;margin-top:16px}.forgot-password ion-button[data-v-f283ebf8]{--color: #64748b;text-transform:none;font-size:14px}.divider[data-v-f283ebf8]{display:flex;align-items:center;margin:24px 0;text-align:center}.divider[data-v-f283ebf8]:before,.divider[data-v-f283ebf8]:after{content:"";flex:1;border-bottom:1px solid #e2e8f0}.divider-text[data-v-f283ebf8]{padding:0 16px;color:#94a3b8;font-size:14px;font-weight:500}.google-button[data-v-f283ebf8]{--background: white;--color: #1f2937;--border-radius: 12px;--box-shadow: 0 2px 8px rgba(0, 0, 0, .1);height:50px;font-weight:600;text-transform:none;font-size:16px;border:2px solid #e5e7eb;transition:all .3s ease}.google-button[data-v-f283ebf8]:hover{--background: #f9fafb;--box-shadow: 0 4px 12px rgba(0, 0, 0, .15);transform:translateY(-2px)}.google-button[data-v-f283ebf8]:active{transform:translateY(0)}.google-button ion-icon[data-v-f283ebf8]{font-size:24px;margin-right:8px}.guest-button[data-v-f283ebf8]{--background: transparent;--color: #64748b;--border-radius: 12px;--border-color: #64748b;--border-width: 2px;height:50px;font-weight:600;text-transform:none;font-size:16px;margin-top:12px;transition:all .3s ease}.guest-button[data-v-f283ebf8]:hover{--background: rgba(100, 116, 139, .1);--border-color: #475569;--color: #475569;transform:translateY(-2px)}.guest-button[data-v-f283ebf8]:active{transform:translateY(0)}.register-section[data-v-f283ebf8]{text-align:center;margin-top:24px}.register-text[data-v-f283ebf8]{color:rgba(255,255,255,.8);font-size:14px;display:flex;align-items:center;justify-content:center;gap:4px}.register-button[data-v-f283ebf8]{--color: #3b82f6;text-transform:none;font-weight:600;font-size:14px;margin:0}@keyframes fadeInDown-f283ebf8{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}@keyframes fadeInUp-f283ebf8{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (min-width: 768px){.login-container[data-v-f283ebf8]{max-width:440px;margin:0 auto}}\n/*$vite$:1*/',document.head.appendChild(a);const q=t("auth",()=>{const e=o(null),a=o(!1),t=o(!1),r=o(!1),l=o(null);a.value||D(t=>{e.value=t,a.value=!0}),t.value||(t.value=!0,O().then(a=>{a&&(e.value=a)}).catch(e=>{l.value=(null==e?void 0:e.message)||"Erreur de connexion Google"}));const i=n(()=>!!e.value);return{user:e,initialized:a,redirectHandled:t,loading:r,error:l,isAuthenticated:i,loginWithEmail:async(a,t)=>{r.value=!0,l.value=null;try{const o=await B(a,t);e.value=o}catch(o){throw l.value=(null==o?void 0:o.message)||"Erreur de connexion",o}finally{r.value=!1}},loginGoogleAction:async()=>{r.value=!0,l.value=null;try{const a=await M();e.value=a}catch(a){throw l.value=(null==a?void 0:a.message)||"Erreur de connexion Google",a}finally{r.value=!1}},logoutAction:async()=>{await T(),e.value=null}}}),F={class:"login-container"},H={class:"brand-section"},L={class:"logo-circle"},P={class:"form-section"},J={key:1},K={class:"forgot-password"},N={key:1};e("default",$(r({__name:"LoginPage",setup(e){const a=o(""),t=o(""),r=o(!1),D=o(!1),O=l(),B=q(),{loading:M,error:T}=i(B),{showToast:$}=W(),{handleError:Q,clearError:R}=function(){const e=o(null),{showToast:a}=W();return{lastError:e,handleError:(t,o="Une erreur est survenue")=>{const n=(null==t?void 0:t.message)||o;console.error(t),e.value=n,a(n,"danger")},clearError:()=>{e.value=null}}}(),{hasErrors:X}=function(e){const a=n(()=>{const a={};return Object.entries(e).forEach(([e,t])=>{t.value&&t.value.toString().trim()||(a[e]="Ce champ est obligatoire")}),a}),t=n(()=>Object.keys(a.value).length>0);return{errors:a,hasErrors:t}}({email:a,password:t});s(()=>B.isAuthenticated,e=>{e&&O.replace("/home")},{immediate:!0});const Z=async()=>{if(R(),X.value)$("Veuillez remplir tous les champs obligatoires","warning");else try{await B.loginWithEmail(a.value,t.value),$("Connexion réussie","success"),O.replace("/home")}catch(e){Q(e,"Email ou mot de passe incorrect")}},ee=async()=>{R(),r.value=!0;try{await B.loginGoogleAction(),$("Connexion Google en cours...","primary")}catch(e){Q(e,"Erreur lors de la connexion avec Google")}finally{r.value=!1}},ae=()=>{O.push("/home")};return(e,o)=>(d(),c(b(S),null,{default:f(()=>[u(b(g),{class:"login-content",fullscreen:!0},{default:f(()=>[p("div",F,[p("div",H,[p("div",L,[u(b(x),{icon:b(v),class:"logo-icon"},null,8,["icon"])]),o[3]||(o[3]=p("h1",{class:"brand-title"},"Bienvenue",-1)),o[4]||(o[4]=p("p",{class:"brand-subtitle"},"Connectez-vous à votre compte",-1))]),p("div",P,[u(b(m),{class:"login-card"},{default:f(()=>[u(b(h),null,{default:f(()=>[u(b(y),{lines:"none",class:"input-item"},{default:f(()=>[u(b(x),{icon:b(w),slot:"start",class:"input-icon"},null,8,["icon"]),u(b(k),{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e),label:"Email","label-placement":"floating",type:"email",placeholder:"email@exemple.com"},null,8,["modelValue"])]),_:1}),u(b(y),{lines:"none",class:"input-item"},{default:f(()=>[u(b(x),{icon:b(v),slot:"start",class:"input-icon"},null,8,["icon"]),u(b(k),{modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=e=>t.value=e),label:"Mot de passe","label-placement":"floating",type:D.value?"text":"password"},null,8,["modelValue","type"]),u(b(z),{fill:"clear",slot:"end",onClick:o[2]||(o[2]=e=>D.value=!D.value),class:"password-toggle"},{default:f(()=>[u(b(x),{icon:D.value?b(_):b(E),slot:"icon-only"},null,8,["icon"])]),_:1})]),_:1}),b(T)?(d(),c(b(C),{key:0,color:"danger",class:"error-text"},{default:f(()=>[u(b(x),{icon:b(Y)},null,8,["icon"]),j(" "+G(b(T)),1)]),_:1})):V("",!0),u(b(z),{expand:"block",onClick:Z,disabled:b(M),class:"login-button"},{default:f(()=>[b(M)?(d(),c(b(A),{key:0,name:"crescent"})):(d(),I("span",J,"Se connecter"))]),_:1},8,["disabled"]),p("div",K,[u(b(z),{fill:"clear",size:"small"},{default:f(()=>[...o[5]||(o[5]=[j(" Mot de passe oublié ? ",-1)])]),_:1})]),o[7]||(o[7]=p("div",{class:"divider"},[p("span",{class:"divider-text"},"OU")],-1)),u(b(z),{expand:"block",onClick:ee,disabled:r.value,class:"google-button"},{default:f(()=>[u(b(x),{icon:b(U),slot:"start"},null,8,["icon"]),r.value?(d(),c(b(A),{key:0,name:"crescent"})):(d(),I("span",N,"Se connecter avec Google"))]),_:1},8,["disabled"]),u(b(z),{expand:"block",fill:"outline",onClick:ae,class:"guest-button"},{default:f(()=>[...o[6]||(o[6]=[j(" Continuer sans se connecter ",-1)])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1}))}}),[["__scopeId","data-v-f283ebf8"]]))}}});
