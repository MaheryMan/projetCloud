System.register(["./_plugin-vue_export-helper-legacy-B5Dy_ev0.js","./index-legacy-CuS9xjLg.js"],function(e,t){"use strict";var n,i,r,s,a,o,c,l,u,d,h,p,R,I,m,E,g,w,N,S,_,O,y,f,U,C,T,k,P,W,v,A,b,F,G,D,L,V,M,H,x,B,$,j,Y,K,J;return{setters:[e=>{n=e.W,i=e.P,r=e.c},e=>{s=e.aw,a=e.ax,o=e.ay,c=e.az,l=e.aA,u=e.aB,d=e.aC,h=e.aD,p=e.aE,R=e.aF,I=e.aG,m=e.aH,E=e.a5,g=e.aI,w=e.aJ,N=e.aK,S=e.aL,_=e.aM,O=e.aN,y=e.aO,f=e.aP,U=e.aQ,C=e.aR,T=e.aS,k=e.a4,P=e.aT,W=e.aU,v=e.aV,A=e.aW,b=e.aX,F=e.aY,G=e.aZ,D=e.a_,L=e.a$,V=e.a6,M=e.b0,H=e.b1,x=e.b2,B=e.b3,$=e.b4,j=e.b5,Y=e.b6,K=e.b7,J=e.b8}],execute:function(){class t extends n{constructor(){super(),this.lastConfirmationResult=new Map;const e=s();e.onAuthStateChanged(e=>this.handleAuthStateChange(e)),e.onIdTokenChanged(e=>{this.handleIdTokenChange(e)})}async applyActionCode(e){const t=s();return a(t,e.oobCode)}async createUserWithEmailAndPassword(e){const t=s(),n=await o(t,e.email,e.password);return this.createSignInResult(n,null)}async confirmPasswordReset(e){const t=s();return c(t,e.oobCode,e.newPassword)}async confirmVerificationCode(e){const{verificationCode:n,verificationId:i}=e,r=this.lastConfirmationResult.get(i);if(!r)throw new Error(t.ERROR_CONFIRMATION_RESULT_MISSING);const s=await r.confirm(n);return this.createSignInResult(s,null)}async deleteUser(){const e=s().currentUser;if(!e)throw new Error(t.ERROR_NO_USER_SIGNED_IN);return l(e)}async fetchSignInMethodsForEmail(e){const t=s();return{signInMethods:await u(t,e.email)}}async getPendingAuthResult(){throw this.unimplemented("Not implemented on web.")}async getCurrentUser(){const e=s();return{user:this.createUserResult(e.currentUser)}}async getIdToken(e){const n=s();if(!n.currentUser)throw new Error(t.ERROR_NO_USER_SIGNED_IN);return{token:await n.currentUser.getIdToken(null==e?void 0:e.forceRefresh)||""}}async getIdTokenResult(e){const n=s();if(!n.currentUser)throw new Error(t.ERROR_NO_USER_SIGNED_IN);const i=await n.currentUser.getIdTokenResult(null==e?void 0:e.forceRefresh);return Object.assign(Object.assign({},i),{authTime:Date.parse(i.authTime),expirationTime:Date.parse(i.expirationTime),issuedAtTime:Date.parse(i.issuedAtTime)})}async getRedirectResult(){const e=s(),t=await d(e),n=t?h.credentialFromResult(t):null;return this.createSignInResult(t,n)}async getTenantId(){return{tenantId:s().tenantId}}async isSignInWithEmailLink(e){const t=s();return{isSignInWithEmailLink:p(t,e.emailLink)}}async linkWithApple(e){const t=new h(i.APPLE);this.applySignInOptions(e||{},t);const n=await this.linkCurrentUserWithPopupOrRedirect(t,null==e?void 0:e.mode),r=h.credentialFromResult(n);return this.createSignInResult(n,r)}async linkWithEmailAndPassword(e){const t=R.credential(e.email,e.password),n=await this.linkCurrentUserWithCredential(t);return this.createSignInResult(n,t)}async linkWithEmailLink(e){const t=R.credentialWithLink(e.email,e.emailLink),n=await this.linkCurrentUserWithCredential(t);return this.createSignInResult(n,t)}async linkWithFacebook(e){const t=new I;this.applySignInOptions(e||{},t);const n=await this.linkCurrentUserWithPopupOrRedirect(t,null==e?void 0:e.mode),i=I.credentialFromResult(n);return this.createSignInResult(n,i)}async linkWithGameCenter(){throw this.unimplemented("Not implemented on web.")}async linkWithGithub(e){const t=new m;this.applySignInOptions(e||{},t);const n=await this.linkCurrentUserWithPopupOrRedirect(t,null==e?void 0:e.mode),i=m.credentialFromResult(n);return this.createSignInResult(n,i)}async linkWithGoogle(e){const t=new E;this.applySignInOptions(e||{},t);const n=await this.linkCurrentUserWithPopupOrRedirect(t,null==e?void 0:e.mode),i=E.credentialFromResult(n);return this.createSignInResult(n,i)}async linkWithMicrosoft(e){const t=new h(i.MICROSOFT);this.applySignInOptions(e||{},t);const n=await this.linkCurrentUserWithPopupOrRedirect(t,null==e?void 0:e.mode),r=h.credentialFromResult(n);return this.createSignInResult(n,r)}async linkWithOpenIdConnect(e){const t=new h(e.providerId);this.applySignInOptions(e,t);const n=await this.linkCurrentUserWithPopupOrRedirect(t,e.mode),i=h.credentialFromResult(n);return this.createSignInResult(n,i)}async linkWithPhoneNumber(e){const n=s().currentUser;if(!n)throw new Error(t.ERROR_NO_USER_SIGNED_IN);if(!e.phoneNumber)throw new Error(t.ERROR_PHONE_NUMBER_MISSING);if(!(e.recaptchaVerifier&&e.recaptchaVerifier instanceof g))throw new Error(t.ERROR_RECAPTCHA_VERIFIER_MISSING);try{const i=await w(n,e.phoneNumber,e.recaptchaVerifier),{verificationId:r}=i;this.lastConfirmationResult.set(r,i);const s={verificationId:r};this.notifyListeners(t.PHONE_CODE_SENT_EVENT,s)}catch(i){const e={message:this.getErrorMessage(i)};this.notifyListeners(t.PHONE_VERIFICATION_FAILED_EVENT,e)}}async linkWithPlayGames(){throw this.unimplemented("Not implemented on web.")}async linkWithTwitter(e){const t=new N;this.applySignInOptions(e||{},t);const n=await this.linkCurrentUserWithPopupOrRedirect(t,null==e?void 0:e.mode),i=N.credentialFromResult(n);return this.createSignInResult(n,i)}async linkWithYahoo(e){const t=new h(i.YAHOO);this.applySignInOptions(e||{},t);const n=await this.linkCurrentUserWithPopupOrRedirect(t,null==e?void 0:e.mode),r=h.credentialFromResult(n);return this.createSignInResult(n,r)}async reload(){const e=s().currentUser;if(!e)throw new Error(t.ERROR_NO_USER_SIGNED_IN);return S(e)}async revokeAccessToken(e){const t=s();return _(t,e.token)}async sendEmailVerification(e){const n=s().currentUser;if(!n)throw new Error(t.ERROR_NO_USER_SIGNED_IN);return O(n,null==e?void 0:e.actionCodeSettings)}async sendPasswordResetEmail(e){const t=s();return y(t,e.email,e.actionCodeSettings)}async sendSignInLinkToEmail(e){const t=s();return f(t,e.email,e.actionCodeSettings)}async setLanguageCode(e){s().languageCode=e.languageCode}async setPersistence(e){const t=s();switch(e.persistence){case r.BrowserLocal:await U(t,J);break;case r.BrowserSession:await U(t,K);break;case r.IndexedDbLocal:await U(t,Y);break;case r.InMemory:await U(t,j)}}async setTenantId(e){s().tenantId=e.tenantId}async signInAnonymously(){const e=s(),t=await C(e);return this.createSignInResult(t,null)}async signInWithApple(e){const t=new h(i.APPLE);this.applySignInOptions(e||{},t);const n=await this.signInWithPopupOrRedirect(t,null==e?void 0:e.mode),r=h.credentialFromResult(n);return this.createSignInResult(n,r)}async signInWithCustomToken(e){const t=s(),n=await T(t,e.token);return this.createSignInResult(n,null)}async signInWithEmailAndPassword(e){const t=s(),n=await k(t,e.email,e.password);return this.createSignInResult(n,null)}async signInWithEmailLink(e){const t=s(),n=await P(t,e.email,e.emailLink);return this.createSignInResult(n,null)}async signInWithFacebook(e){const t=new I;this.applySignInOptions(e||{},t);const n=await this.signInWithPopupOrRedirect(t,null==e?void 0:e.mode),i=I.credentialFromResult(n);return this.createSignInResult(n,i)}async signInWithGithub(e){const t=new m;this.applySignInOptions(e||{},t);const n=await this.signInWithPopupOrRedirect(t,null==e?void 0:e.mode),i=m.credentialFromResult(n);return this.createSignInResult(n,i)}async signInWithGoogle(e){const t=new E;this.applySignInOptions(e||{},t);const n=await this.signInWithPopupOrRedirect(t,null==e?void 0:e.mode),i=E.credentialFromResult(n);return this.createSignInResult(n,i)}async signInWithMicrosoft(e){const t=new h(i.MICROSOFT);this.applySignInOptions(e||{},t);const n=await this.signInWithPopupOrRedirect(t,null==e?void 0:e.mode),r=h.credentialFromResult(n);return this.createSignInResult(n,r)}async signInWithOpenIdConnect(e){const t=new h(e.providerId);this.applySignInOptions(e,t);const n=await this.signInWithPopupOrRedirect(t,e.mode),i=h.credentialFromResult(n);return this.createSignInResult(n,i)}async signInWithPhoneNumber(e){if(!e.phoneNumber)throw new Error(t.ERROR_PHONE_NUMBER_MISSING);if(!(e.recaptchaVerifier&&e.recaptchaVerifier instanceof g))throw new Error(t.ERROR_RECAPTCHA_VERIFIER_MISSING);const n=s();try{const i=await W(n,e.phoneNumber,e.recaptchaVerifier),{verificationId:r}=i;this.lastConfirmationResult.set(r,i);const s={verificationId:r};this.notifyListeners(t.PHONE_CODE_SENT_EVENT,s)}catch(i){const e={message:this.getErrorMessage(i)};this.notifyListeners(t.PHONE_VERIFICATION_FAILED_EVENT,e)}}async signInWithPlayGames(){throw this.unimplemented("Not implemented on web.")}async signInWithGameCenter(){throw this.unimplemented("Not implemented on web.")}async signInWithTwitter(e){const t=new N;this.applySignInOptions(e||{},t);const n=await this.signInWithPopupOrRedirect(t,null==e?void 0:e.mode),i=N.credentialFromResult(n);return this.createSignInResult(n,i)}async signInWithYahoo(e){const t=new h(i.YAHOO);this.applySignInOptions(e||{},t);const n=await this.signInWithPopupOrRedirect(t,null==e?void 0:e.mode),r=h.credentialFromResult(n);return this.createSignInResult(n,r)}async signOut(){const e=s();await e.signOut()}async unlink(e){const n=s();if(!n.currentUser)throw new Error(t.ERROR_NO_USER_SIGNED_IN);const i=await v(n.currentUser,e.providerId);return{user:this.createUserResult(i)}}async updateEmail(e){const n=s().currentUser;if(!n)throw new Error(t.ERROR_NO_USER_SIGNED_IN);return A(n,e.newEmail)}async updatePassword(e){const n=s().currentUser;if(!n)throw new Error(t.ERROR_NO_USER_SIGNED_IN);return b(n,e.newPassword)}async updateProfile(e){const n=s().currentUser;if(!n)throw new Error(t.ERROR_NO_USER_SIGNED_IN);return F(n,{displayName:e.displayName,photoURL:e.photoUrl})}async useAppLanguage(){s().useDeviceLanguage()}async useEmulator(e){const t=s(),n=e.port||9099,i=e.scheme||"http";e.host.includes("://")?G(t,`${e.host}:${n}`):G(t,`${i}://${e.host}:${n}`)}async verifyBeforeUpdateEmail(e){const n=s().currentUser;if(!n)throw new Error(t.ERROR_NO_USER_SIGNED_IN);return D(n,null==e?void 0:e.newEmail,null==e?void 0:e.actionCodeSettings)}handleAuthStateChange(e){const n={user:this.createUserResult(e)};this.notifyListeners(t.AUTH_STATE_CHANGE_EVENT,n,!0)}async handleIdTokenChange(e){if(!e)return;const n={token:await e.getIdToken(!1)};this.notifyListeners(t.ID_TOKEN_CHANGE_EVENT,n,!0)}applySignInOptions(e,t){if(e.customParameters){const n={};e.customParameters.map(e=>{n[e.key]=e.value}),t.setCustomParameters(n)}if(e.scopes)for(const n of e.scopes)t.addScope(n)}signInWithPopupOrRedirect(e,t){const n=s();return"redirect"===t?L(n,e):V(n,e)}linkCurrentUserWithPopupOrRedirect(e,n){const i=s();if(!i.currentUser)throw new Error(t.ERROR_NO_USER_SIGNED_IN);return"redirect"===n?M(i.currentUser,e):H(i.currentUser,e)}linkCurrentUserWithCredential(e){const n=s();if(!n.currentUser)throw new Error(t.ERROR_NO_USER_SIGNED_IN);return x(n.currentUser,e)}requestAppTrackingTransparencyPermission(){throw this.unimplemented("Not implemented on web.")}checkAppTrackingTransparencyPermission(){throw this.unimplemented("Not implemented on web.")}createSignInResult(e,t){return{user:this.createUserResult((null==e?void 0:e.user)||null),credential:this.createCredentialResult(t),additionalUserInfo:this.createAdditionalUserInfoResult(e)}}createCredentialResult(e){if(!e)return null;const t={providerId:e.providerId};return e instanceof B&&(t.accessToken=e.accessToken,t.idToken=e.idToken,t.secret=e.secret),t}createUserResult(e){return e?{displayName:e.displayName,email:e.email,emailVerified:e.emailVerified,isAnonymous:e.isAnonymous,metadata:this.createUserMetadataResult(e.metadata),phoneNumber:e.phoneNumber,photoUrl:e.photoURL,providerData:this.createUserProviderDataResult(e.providerData),providerId:e.providerId,tenantId:e.tenantId,uid:e.uid}:null}createUserMetadataResult(e){const t={};return e.creationTime&&(t.creationTime=Date.parse(e.creationTime)),e.lastSignInTime&&(t.lastSignInTime=Date.parse(e.lastSignInTime)),t}createUserProviderDataResult(e){return e.map(e=>({displayName:e.displayName,email:e.email,phoneNumber:e.phoneNumber,photoUrl:e.photoURL,providerId:e.providerId,uid:e.uid}))}createAdditionalUserInfoResult(e){if(!e)return null;const t=$(e);if(!t)return null;const{isNewUser:n,profile:i,providerId:r,username:s}=t,a={isNewUser:n};return null!==r&&(a.providerId=r),null!==i&&(a.profile=i),null!=s&&(a.username=s),a}getErrorMessage(e){return e instanceof Object&&"message"in e&&"string"==typeof e.message?e.message:JSON.stringify(e)}}e("FirebaseAuthenticationWeb",t),t.AUTH_STATE_CHANGE_EVENT="authStateChange",t.ID_TOKEN_CHANGE_EVENT="idTokenChange",t.PHONE_CODE_SENT_EVENT="phoneCodeSent",t.PHONE_VERIFICATION_FAILED_EVENT="phoneVerificationFailed",t.ERROR_NO_USER_SIGNED_IN="No user is signed in.",t.ERROR_PHONE_NUMBER_MISSING="phoneNumber must be provided.",t.ERROR_RECAPTCHA_VERIFIER_MISSING="recaptchaVerifier must be provided and must be an instance of RecaptchaVerifier.",t.ERROR_CONFIRMATION_RESULT_MISSING="No confirmation result with this verification id was found."}}});
